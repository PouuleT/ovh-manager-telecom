<section class="telecom-telephony-service-fax-campaigns">

    <div class="row">
        <div class="col-xs-12">
            <div class="widget-presentation bottom-space-m32">

                <header class="widget-presentation-header">
                    <h2 class="widget-presentation-title"
                        data-translate="telephony_service_fax_campaigns_title">
                    </h2>
                </header>

                <div class="bottom-space-m16">
                    <button
                        type="button"
                        class="btn btn-primary btn-block-xs-only"
                        data-ng-click="CampaignsCtrl.addCampaign()">
                        <i class="ovh-font ovh-font-ajouter right-space-m4" aria-hidden="true"></i>
                        <span data-translate="telephony_service_fax_campaigns_add_title"></span>
                    </button>
                    <button
                        type="button"
                        class="btn btn-default btn-block-xs-only"
                        data-ng-click="CampaignsCtrl.toggleShowFilter()"
                        data-ng-disabled="!CampaignsCtrl.campaigns.raw.length">
                        <i class="ovh-font ovh-font-filter right-space-m4" aria-hidden="true"></i>
                        <span data-ng-if="!CampaignsCtrl.campaigns.showFilter"
                              data-translate="telephony_service_fax_campaigns_filter">
                        </span>
                        <span data-ng-if="CampaignsCtrl.campaigns.showFilter"
                              data-translate="telephony_service_fax_campaigns_filter_remove">
                        </span>
                    </button>
                </div>

                <div class="row bottom-space-m16" data-ng-if="CampaignsCtrl.campaigns.showFilter">
                    <div class="col-xs-12 col-sm-4 col-sm-push-8">
                        <select
                            flat-select
                            class="form-control"
                            required
                            data-ng-change="CampaignsCtrl.applySorting()"
                            data-ng-model="CampaignsCtrl.campaigns.filterBy.status">
                            <option value="" data-translate="telephony_service_fax_campaigns_status_any"></option>
                            <option value="todo" data-translate="telephony_service_fax_campaigns_status_todo"></option>
                            <option value="doing" data-translate="telephony_service_fax_campaigns_status_doing"></option>
                            <option value="stop" data-translate="telephony_service_fax_campaigns_status_stop"></option>
                            <option value="stopTodo" data-translate="telephony_service_fax_campaigns_status_stopTodo"></option>
                            <option value="stopDoing" data-translate="telephony_service_fax_campaigns_status_stopDoing"></option>
                            <option value="error" data-translate="telephony_service_fax_campaigns_status_error"></option>
                            <option value="done" data-translate="telephony_service_fax_campaigns_status_done"></option>
                        </select>
                    </div>
                </div><!-- .row -->

                <div class="table-responsive-vertical">
                    <table class="table table-pretty table-hover table-stripped no-space">
                        <thead>
                            <tr>
                                <th scope="col">
                                    <button
                                        type="button"
                                        class="no-style left-space-p0"
                                        data-ng-click="CampaignsCtrl.orderBy('name')">
                                        <label class="pointer"
                                               data-translate="telephony_service_fax_campaigns_list_title_name">
                                        </label>
                                        <span class="table-pretty-filter">
                                            <i class="fa" data-ng-class="{
                                                'fa-sort': CampaignsCtrl.campaigns.orderBy !== 'name',
                                                'fa-sort-desc': CampaignsCtrl.campaigns.orderBy === 'name' && CampaignsCtrl.campaigns.orderDesc,
                                                'fa-sort-asc': CampaignsCtrl.campaigns.orderBy === 'name' && !CampaignsCtrl.campaigns.orderDesc
                                            }"></i>
                                        </span>
                                    </button>
                                </th>
                                <th scope="col">
                                    <button
                                        type="button"
                                        class="no-style left-space-p0"
                                        data-ng-click="CampaignsCtrl.orderBy('status')">
                                        <label class="pointer"
                                               data-translate="telephony_service_fax_campaigns_list_title_status">
                                        </label>
                                        <span class="table-pretty-filter">
                                            <i class="fa" data-ng-class="{
                                                'fa-sort': CampaignsCtrl.campaigns.orderBy !== 'status',
                                                'fa-sort-desc': CampaignsCtrl.campaigns.orderBy === 'status' && CampaignsCtrl.campaigns.orderDesc,
                                                'fa-sort-asc': CampaignsCtrl.campaigns.orderBy === 'status' && !CampaignsCtrl.campaigns.orderDesc
                                            }"></i>
                                        </span>
                                    </button>
                                </th>
                                <th scope="col">
                                    <label data-translate="telephony_service_fax_campaigns_list_title_success"></label>
                                    <i class="fa fa-info-circle fs14"
                                       aria-hidden="true"
                                       data-uib-tooltip="{{ 'telephony_service_fax_campaigns_list_title_success_info' | translate }}"
                                       data-tooltip-class="word-break">
                                    </i>
                                    <span class="sr-only"
                                          data-translate="telephony_service_fax_campaigns_list_title_success_info">
                                    </span>
                                </th>
                                <th scope="col">
                                    <button
                                        type="button"
                                        class="no-style right-space-m4"
                                        data-ng-disabled="CampaignsCtrl.campaigns.isLoading"
                                        data-ng-click="CampaignsCtrl.refresh()">
                                        <i class="fa fa-refresh"
                                           aria-hidden="true"
                                           data-ng-class="{ 'fa-spin': CampaignsCtrl.campaigns.isLoading }">
                                        </i>
                                    </button>
                                </th>
                            </tr>
                        </thead>
                        <tbody data-ng-if="CampaignsCtrl.campaigns.isLoading">
                            <tr>
                                <td class="text-center top-space-p16 bottom-space-p16" colspan="4">
                                    <span class="right-space-m4" data-translate="loading"></span>
                                    <spinner></spinner>
                                </td>
                            </tr>
                        </tbody>
                        <tbody data-ng-if="!CampaignsCtrl.campaigns.isLoading && !CampaignsCtrl.campaigns.raw.length">
                            <tr>
                                <td colspan="4"
                                    class="text-center top-space-p16 bottom-space-p16"
                                    data-translate="telephony_service_fax_campaigns_list_empty">
                                </td>
                            </tr>
                        </tbody>
                        <tbody data-ng-if="!CampaignsCtrl.campaigns.isLoading &&
                                           CampaignsCtrl.campaigns.raw.length &&
                                           !CampaignsCtrl.campaigns.paginated.length">
                            <tr>
                                <td class="text-center top-space-p16 bottom-space-p16" colspan="4">
                                    <span data-translate="telephony_service_fax_campaigns_list_not_found"></span>
                                </td>
                            </tr>
                        </tbody>
                        <tbody data-ng-if="!CampaignsCtrl.campaigns.isLoading && CampaignsCtrl.campaigns.raw.length">
                            <tr data-ng-repeat="campaign in CampaignsCtrl.campaigns.paginated | orderBy:CampaignsCtrl.order.by:CampaignsCtrl.order.reverse">
                                <td data-title="{{ 'telephony_service_fax_campaigns_list_title_name' | translate }}"
                                    data-ng-bind="campaign.name">
                                </td>
                                <td data-title="{{ 'telephony_service_fax_campaigns_list_title_status' | translate }}">
                                    <span data-ng-if="campaign.status"
                                          data-ng-bind="'telephony_service_fax_campaigns_status_' + campaign.status | translate">
                                    </span>
                                    <span data-ng-if="!campaign.status">-</span>
                                </td>
                                <td data-title="{{ 'telephony_service_fax_campaigns_list_title_success' | translate }}">
                                    <span data-ng-if="campaign.dateEnd"
                                          data-translate="telephony_service_fax_campaigns_success">
                                    </span>
                                    <span data-ng-if="!campaign.dateEnd && (campaign.countSuccess > 0 || campaign.countTotal > 0)"
                                          data-translate="telephony_service_fax_campaigns_success_partial">
                                    </span>
                                    <span data-ng-if="campaign.countSuccess === 0 && campaign.countFailed === 0 && campaign.countTotal === 0"
                                          data-translate="telephony_service_fax_campaigns_success_not_available">
                                    </span>
                                    <span data-ng-if="campaign.countFailed > 0 && campaing.countSuccess === 0"
                                          data-translate="telephony_service_fax_campaigns_success_failed">
                                    </span>
                                    <em class="visible-xs"
                                        data-translate="telephony_service_fax_campaigns_list_title_success_info">
                                    </em>
                                </td>
                                <td class="text-right">
                                    <div class="inline-block" data-uib-dropdown>
                                        <button
                                            type="button"
                                            class="btn btn-default btn-xs"
                                            data-uib-dropdown-toggle>
                                            <i class="ovh-font ovh-font-dots" aria-hidden="true"></i>
                                            <span class="sr-only"
                                                  data-translate="telephony_service_fax_campaigns_sr_only_actions">
                                            </span>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                            <li role="menuitem"
                                                data-ng-class="{ 'disabled': campaign.status === 'stop' }">
                                                <a href="#"
                                                   data-ng-click="CampaignsCtrl.readCampaign($event, campaign)"
                                                   data-translate="telephony_service_fax_campaigns_action_read">
                                                </a>
                                            </li>
                                            <li role="menuitem"
                                                data-ng-class="{ 'disabled': campaign.status === 'todo' ||
                                                    campaign.status === 'doing' ||
                                                    campaign.status === 'error' ||
                                                    campaign.status === 'done' ||
                                                    campaign.status === 'stop'
                                                }">
                                                <a href="#"
                                                   data-ng-click="CampaignsCtrl.startCampaign($event, campaign)"
                                                   data-translate="telephony_service_fax_campaigns_action_start">
                                                </a>
                                            </li>
                                            <li role="menuitem"
                                                data-ng-class="{ 'disabled': campaign.status === 'stopTodo' ||
                                                    campaign.status === 'stopDoing' ||
                                                    campaign.status === 'error' ||
                                                    campaign.status === 'done'
                                                }">
                                                <a href="#"
                                                   data-ng-click="CampaignsCtrl.stopCampaign($event, campaign)"
                                                   data-translate="telephony_service_fax_campaigns_action_stop">
                                                </a>
                                            </li>
                                            <li role="menuitem">
                                                <a href="#"
                                                   data-ng-click="CampaignsCtrl.removeCampaign($event, campaign)"
                                                   data-translate="delete">
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="table-pretty-pagination top-space-m8"
                         data-ng-if="!CampaignsCtrl.campaigns.isLoading && CampaignsCtrl.campaigns.raw.length"
                         data-pagination-front
                         data-items="CampaignsCtrl.campaigns.sorted"
                         data-paginated-items="CampaignsCtrl.campaigns.paginated"
                         data-current-page="currentPage"
                         data-nb-pages="nbPages"
                         data-items-per-page="CampaignsCtrl.campaigns.perPage"
                         data-page-placeholder="{{ 'common_pagination_page' | translate: { currentPage: currentPage, nbPages: nbPages } }}"
                         data-item-per-page-placeholder="{{ 'common_pagination_display' | translate }}">
                    </div>
                </div>

            </div>
        </div>
    </div><!-- .row -->

</section><!-- .telephony-group-service-fax-campaigns -->
